#!/usr/bin/env bash

set -e

BASEDIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# dotbot vars
DOTBOT_DIR="${BASEDIR}/dotbot"
DOTBOT_BIN="${DOTBOT_DIR}/bin/dotbot"
DOTBOT_CONFIG="${BASEDIR}/install.conf.yaml"

# submodule sync
git -C $BASEDIR submodule sync --recursive
git -C $BASEDIR submodule update --init --recursive

# dotbot install
"${DOTBOT_BIN}" -d "${BASEDIR}" -c "${DOTBOT_CONFIG}" "${@}"
